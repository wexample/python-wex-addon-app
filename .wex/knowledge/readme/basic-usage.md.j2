## Usage

### Setup & Installation

**Initial setup of the development environment:**
```bash
# Install PDM dependencies for all packages in the suite
app::suite/setup

# Install local editable packages across the suite
app::suite/setup-local
```

**For a single package:**
```bash
# Install PDM dependencies for current package only
.wex/bin/app-manager setup
```

### Complete Development & Publication Workflow

**1. Initial Setup (one-time)**
```bash
# Install dependencies and setup local packages
app::suite/setup && app::suite/setup-local
```

**2. Development Cycle**
```bash
# Rectify code across all packages
app::file-state/rectify --all-packages

# Bump only packages with changes (excluding suite)
app::package/bump-changed --packages-only

# Validate dependencies and propagate versions
app::suite/prepare

# Commit and push all changes
app::suite/commit-and-push --yes
```

**3. Publication**
```bash
# Publish packages with changes to PyPI
app::suite/publish
```

### File State Management
* `app::file-state/rectify [--all-packages]`: Normalizes/rectifies code for a single app or across all packages in the suite; no commits.

### Version Management

The version management commands use `SuiteOrEachPackageMiddleware` which provides flexible execution control:
- **Default**: Executes on the suite (or single package if app_path points to a package)
- **`--all-packages`**: Executes on both the suite AND all packages
- **`--packages-only`**: Executes only on packages (excludes suite, implies `--all-packages`)
- **`--suite-only`**: Executes only on the suite (excludes packages)

Commands:
* `app::package/bump [--all-packages|--packages-only|--suite-only] [--yes]`: Bumps version for suite and/or packages.
* `app::package/bump-changed [--all-packages|--packages-only|--suite-only] [--yes]`: Bumps version only for packages/suite that have new content (no current version tag on HEAD).
* `app::suite/propagate-versions`: Propagates package versions across all dependents in the suite.

### Git Operations
* `app::suite/commit-and-push [--yes]`: Commits and pushes changes for all packages with uncommitted changes.

### Suite Execution
* `app::suite/exec-command -c <command> [--arguments "<args>"]`: Executes a manager command on all packages (e.g., `app::info/show`).
* `app::suite/exec-shell -c "<command>"`: Executes a shell command on all packages.

### Setup & Installation
* `app::suite/setup`: Installs PDM dependencies for all packages in the suite by running `pdm install` in each package.
* `app::suite/setup-local`: Installs local editable packages across the suite (combines `app::suite/setup` + installs packages as editable dependencies).
* `.wex/bin/app-manager setup`: Installs PDM dependencies for a single package.

### Publishing
* `app::suite/prepare`: Validates internal dependencies and propagates versions across all packages. Follow with `app::suite/commit-and-push --yes` to commit changes.
* `app::suite/publish`: Publishes packages to PyPI. Only publishes packages with changes since their last publication tag. Automatically creates and pushes publication tags after successful publish.

### Common Workflows

**Setup development environment:**
```bash
app::suite/setup && app::suite/setup-local
```

**Bump only packages with changes (excluding suite):**
```bash
app::package/bump-changed --packages-only && app::suite/propagate-versions && app::suite/commit-and-push --yes
```

**Bump suite and all packages:**
```bash
app::package/bump --all-packages
```

**Bump only the suite:**
```bash
app::package/bump --suite-only
```

**Rectify all packages:**
```bash
app::file-state/rectify --all-packages
```

**Get info for all packages:**
```bash
app::suite/exec-command -c app::info/show
```