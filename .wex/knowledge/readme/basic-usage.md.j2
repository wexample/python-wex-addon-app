## Usage

### Quick Start: Complete Publication Workflow

```bash
# 1. Rectify code across all packages
app::file-state/rectify --all-packages

# 2. Bump only packages with changes (excluding suite)
app::package/bump-changed --packages-only

# 3. Validate dependencies and propagate versions
app::suite/prepare

# 4. Commit and push all changes
app::suite/commit-and-push --yes

# 5. Publish packages with changes to PyPI
app::suite/publish
```

### File State Management
* `app::file-state/rectify [--all-packages]`: Normalizes/rectifies code for a single app or across all packages in the suite; no commits.

### Version Management

The version management commands use `SuiteOrEachPackageMiddleware` which provides flexible execution control:
- **Default**: Executes on the suite (or single package if app_path points to a package)
- **`--all-packages`**: Executes on both the suite AND all packages
- **`--packages-only`**: Executes only on packages (excludes suite, implies `--all-packages`)
- **`--suite-only`**: Executes only on the suite (excludes packages)

Commands:
* `app::package/bump [--all-packages|--packages-only|--suite-only] [--yes]`: Bumps version for suite and/or packages.
* `app::package/bump-changed [--all-packages|--packages-only|--suite-only] [--yes]`: Bumps version only for packages/suite that have new content (no current version tag on HEAD).
* `app::suite/propagate-versions`: Propagates package versions across all dependents in the suite.

### Git Operations
* `app::suite/commit-and-push [--yes]`: Commits and pushes changes for all packages with uncommitted changes.

### Suite Execution
* `app::suite/exec-command -c <command> [--arguments "<args>"]`: Executes a manager command on all packages (e.g., `app::info/show`).
* `app::suite/exec-shell -c "<command>"`: Executes a shell command on all packages.

### Publishing
* `app::suite/prepare`: Validates internal dependencies and propagates versions across all packages. Follow with `app::suite/commit-and-push --yes` to commit changes.
* `app::suite/publish`: Publishes packages to PyPI. Only publishes packages with changes since their last publication tag. Automatically creates and pushes publication tags after successful publish.

### Common Workflows

**Bump only packages with changes (excluding suite):**
```bash
app::package/bump-changed --packages-only && app::suite/propagate-versions && app::suite/commit-and-push --yes
```

**Bump suite and all packages:**
```bash
app::package/bump --all-packages
```

**Bump only the suite:**
```bash
app::package/bump --suite-only
```

**Rectify all packages:**
```bash
app::file-state/rectify --all-packages
```

**Get info for all packages:**
```bash
app::suite/exec-command -c app::info/show
```